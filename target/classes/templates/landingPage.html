<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<script src="http://mymaplist.com/js/vendor/TweenLite.min.js"></script>
<head lang="en" th:include="fragments/header">
	<title>Dashboard</title>
	<link href="https://code.fancygrid.com/fancy.min.css" rel="stylesheet">
	<script src="https://code.fancygrid.com/fancy.min.js"></script>
</head>
<body>
<link type="text/css" href="css/landingpage.css" rel="stylesheet" />

<h1>Dashboard of your projects</h1>
<br>
<a href="/landingPage">
	<button class="btn btn-custom"><span class="glyphicon glyphicon-refresh"></span> Refresh</button>
</a>
<br></br>
<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>ProjectName</th>
      <th>Status</th>
      <th>Created on</th>
      <th>Completation</th>
      <th>Last Analysis</th>
      <th>Next Analysis</th>
      <th>Run Analysis</th>
    </tr>
  </thead>
  <tbody>
  

	<tr th:each="project : ${projects}">
     
      <td th:if="${project.lastWeekReport == 'RED'}">
      <span class="glyphicon glyphicon-remove-circle red"></span>
      </td>
       <td th:if="${project.lastWeekReport == 'YELLOW'}">
      <span class="glyphicon glyphicon-warning-sign yellow"></span>
      </td>
       <td th:if="${project.lastWeekReport == 'GREEN'}">
        <p><span class="glyphicon glyphicon-ok-circle green"></span></p>
      </td>
      
      
      
      <td>
      <form id="${project.projectName}" th:action="@{/projectDet}" th:object="${projectToSend}" method="POST">
      <input type="hidden" id="projectName"  name="projectName" th:value="${project.projectName}"/>
      <input type="submit"   class="btn btn-secondary"   th:value="${project.projectName}">   
      </form>
      </td>
      <td><p th:text="${project.status}"></td>
      <td><p th:text= "${#dates.format(project.creationTime,'dd-MM-yyyy HH:mm')}"></p></td>
      <td><p th:text= "|${project.analysedCommits}  /  ${project.totalCommits}|"></p></td>
      <td><p th:text= "${#dates.format(project.lastAnalysis,'dd-MM-yyyy HH:mm')}"></td>
      <td><p th:text=  "${#dates.format(project.nextAnalysis,'dd-MM-yyyy HH:mm')}"></td>
      <td>
      <form th:action="@{/runAnalysis}" th:object="${projectToSend}" method="POST">
      <input type="hidden" id="projectName"  name="projectName" th:value="${project.projectName}"/>
      <input type="submit"   class="btn btn-secondary"   value="Run Analysis Now">   
      </form>
      </td>
    </tr>		
  </tbody>
</table>


</body>
</html>